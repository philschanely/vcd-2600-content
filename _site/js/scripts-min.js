function bootstrapify(){$("table").addClass("table"),$("img").addClass("img-responsive")}function loadPages(_context,_marker){var lesson={pages:[],length:0};$(_context+" "+_marker).each(function(i,o){for(var $this=$(o),$next=$this.next(),content="";$next.length>0&&$next[0].localName!=_marker;)content+=$next[0].outerHTML,$next=$next.next();var page={number:i+1,title:$this.html(),content:content,class:0==i?"active":""};lesson.pages.push(page),lesson.length++}),console.log(lesson),$.get("/templates/lesson.tpl.html",function(data){var tpl=Handlebars.compile(data),lessonHTML=$(tpl(lesson));$(_context).replaceWith(lessonHTML),$(_context).on("click",function(e){e.preventDefault();var $target=$(e.target);if($target.hasClass("subnav-link")||$target.hasClass("page-nav-link")){var targetPageNum=Number($target.attr("href").replace("#page-",""));$(_context+" .active").removeClass("active"),$($target.attr("href")).addClass("active"),$(".subnav-link[href='"+$target.attr("href")+"']").closest("li").addClass("active");var nextPageNum=targetPageNum+1,prevPageNum=targetPageNum-1;nextPageNum>lesson.length?$(".pager .next").addClass("disabled"):($(".pager .next a").attr("href","#page-"+nextPageNum),$(".pager .next").removeClass("disabled")),0==prevPageNum?$(".pager .previous").addClass("disabled"):($(".pager .previous a").attr("href","#page-"+prevPageNum),$(".pager .previous").removeClass("disabled"))}})})}$(function(){bootstrapify(),loadPages(".lesson-content","h3")});
//# sourceMappingURL=./scripts-min.js.map